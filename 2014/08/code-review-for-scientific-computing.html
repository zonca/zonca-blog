<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="twitter:card" content="summary_large_image" /><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>How to perform code review for scientific software | Andrea Zonca</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="How to perform code review for scientific software" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Code review is the formal process where a programmer inspects in detail a piece of software developed by somebody else in order to improve code quality by catching bugs, improve readibility and usability. It is used extensively in industry, not much in academia." />
<meta property="og:description" content="Code review is the formal process where a programmer inspects in detail a piece of software developed by somebody else in order to improve code quality by catching bugs, improve readibility and usability. It is used extensively in industry, not much in academia." />
<link rel="canonical" href="https://zonca.dev/2014/08/code-review-for-scientific-computing.html" />
<meta property="og:url" content="https://zonca.dev/2014/08/code-review-for-scientific-computing.html" />
<meta property="og:site_name" content="Andrea Zonca" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2014-08-28T17:00:00-05:00" />
<script type="application/ld+json">
{"headline":"How to perform code review for scientific software","url":"https://zonca.dev/2014/08/code-review-for-scientific-computing.html","dateModified":"2014-08-28T17:00:00-05:00","datePublished":"2014-08-28T17:00:00-05:00","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://zonca.dev/2014/08/code-review-for-scientific-computing.html"},"description":"Code review is the formal process where a programmer inspects in detail a piece of software developed by somebody else in order to improve code quality by catching bugs, improve readibility and usability. It is used extensively in industry, not much in academia.","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="https://zonca.dev/feed.xml" title="Andrea Zonca" /><link rel="shortcut icon" type="image/x-icon" href="/images/favicon.ico"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Primer/15.2.0/primer.css" integrity="sha512-xTz2ys4coGAOz8vuV1NcQBkgVmKhsSEtjbqyMJbBHRplFuvKIUo6xhLHpAyPt9mfR6twHJgn9OgVLuqOvjeBhg==" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog==" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/katex.min.css" integrity="sha512-h7nl+xz8wgDlNM4NqKEM4F1NkIRS17M9+uJwIGwuo8vGqIl4BhuCKdxjWEINm+xyrUjNCnK5dCrhM0sj+wTIXw==" crossorigin="anonymous" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/katex.min.js" integrity="sha512-/CMIhXiDA3m2c9kzRyd97MTb3MC6OVnx4TElQ7fkkoRghwDf6gi41gaT1PwF270W6+J60uTmwgeRpNpJdRV6sg==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/contrib/auto-render.min.js" integrity="sha512-Do7uJAaHZm5OLrIv/yN4w0iG1dbu01kzdMNnFfu/mAqgUk6Nniv2JYHcwH+cNwjqgLcqcuBBk+JRvprLVI8azg==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha512-0doc9hKxR3PYwso42RD1p5ySZpzzuDiOwMrdCEh2WdJZCjcmFKc/wEnL+z8fBQrnHoiNWbo+3fiGkOYXBdQp4A==" crossorigin="anonymous"></script>
    <script>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement( document.body, {
        delimiters: [
            {left: "$$", right: "$$", display: true},
            {left: "[%", right: "%]", display: true},
            {left: "$", right: "$", display: false}
        ]}
        );
    });
    </script>


<script>
function wrap_img(fn) {
    if (document.attachEvent ? document.readyState === "complete" : document.readyState !== "loading") {
        var elements = document.querySelectorAll(".post img");
        Array.prototype.forEach.call(elements, function(el, i) {
            if (el.getAttribute("title") && (el.className != "emoji")) {
                const caption = document.createElement('figcaption');
                var node = document.createTextNode(el.getAttribute("title"));
                caption.appendChild(node);
                const wrapper = document.createElement('figure');
                wrapper.className = 'image';
                el.parentNode.insertBefore(wrapper, el);
                el.parentNode.removeChild(el);
                wrapper.appendChild(el);
                wrapper.appendChild(caption);
            }
        });
    } else { document.addEventListener('DOMContentLoaded', fn); }
}
window.onload = wrap_img;
</script>

<script>
    document.addEventListener("DOMContentLoaded", function(){
    // add link icon to anchor tags
    var elem = document.querySelectorAll(".anchor-link")
    elem.forEach(e => (e.innerHTML = '<i class="fas fa-link fa-xs"></i>'));
    });
</script>
</head>
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Andrea Zonca</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About Me</a><a class="page-link" href="/consult/">Consulting</a><a class="page-link" href="/search/">Search</a><a class="page-link" href="/categories/">Tags</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">How to perform code review for scientific software</h1><p class="post-meta post-meta-title"><time class="dt-published" datetime="2014-08-28T17:00:00-05:00" itemprop="datePublished">
        Aug 28, 2014
      </time>
    </p>

    
      <p class="category-tags"><i class="fas fa-tags category-tags-icon"></i></i> 
      
        <a class="category-tags-link" href="/categories/#github">github</a>
        &nbsp;
      
        <a class="category-tags-link" href="/categories/#git">git</a>
        &nbsp;
      
        <a class="category-tags-link" href="/categories/#openscience">openscience</a>
        &nbsp;
      
        <a class="category-tags-link" href="/categories/#software-carpentry">software-carpentry</a>
        
      
      </p>
    

      
        <div class="pb-5 d-flex flex-wrap flex-justify-end">
          <div class="px-2">

    <a href="https://github.com/zonca/zonca-blog/tree/master/_posts/2014-08-28-code-review-for-scientific-computing.md" role="button" target="_blank">
<img class="notebook-badge-image" src="/assets/badges/github.svg" alt="View On GitHub">
    </a>
</div>

    </div>
      </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>Code review is the formal process where a programmer inspects in detail a piece of software developed by somebody else in order to improve code quality by catching bugs, improve readibility and usability.
It is used extensively in industry, not much in academia.</p>

<p>There has been some discussion about this lately, see:</p>
<ul>
  <li><a href="http://ivory.idyll.org/blog/on-code-review-of-scientific-code.html">A few thoughts on code review of scientific code</a> by Titus Brown</li>
  <li><a href="http://mozillascience.org/code-review-for-science-what-we-learned/">Code review for science: What we learned</a> by Kaitlin Thaney</li>
</ul>

<p>I participated in the <a href="http://software-carpentry.org/blog/2014/01/code-review-round-2.html">second code review pilot study of Software Carpentry</a> where I was paired to a research group in Genomics and I reviewed some of their analysis code.
In this blog post Iâ€™d like to write about some guidelines and best practices on how to perform code review of scientific code.</p>

<p>Best use of code review is on libraries, prior to publication, because an improvement in code quality can help future users of the code. One-off analysis scripts benefit less from the process.</p>

<h2 id="how-to-do-a-code-review-of-a-large-codebase">How to do a code review of a large codebase</h2>

<p>The code review process should be performed on ~200-400 lines of code at a time.
First thing is to ask the code author if she can identify different functionalities of the code that could be packaged and distributed separately. Modularity really helps maintaining software in the long term.</p>

<p>Then the author should follow these steps to get ready for the code review:</p>

<ul>
  <li>For each of the packages identified previously, the code author should create a separate repository, generally on Github, possibly under an organization account (see <a href="http://zonca.github.io/2014/08/github-for-research-groups.html">Github for research groups</a>).</li>
  <li>Create a blank project in the programming language of choice (hopefully Python!) using a pre-defined standard template, I recommend using <a href="https://github.com/audreyr/cookiecutter">CookieCutter</a>.</li>
  <li>Write a <code class="language-plaintext highlighter-rouge">README.md</code> file explaining exactly the functionality of the code in general</li>
  <li>Clone the repository locally, add, commit and push the blank project with <code class="language-plaintext highlighter-rouge">README.md</code> to the <code class="language-plaintext highlighter-rouge">master</code> branch on Github</li>
  <li>Identify a portion of the software of about ~200-400 lines that has a defined functionality and that could be reviewed together. It doesnâ€™t necessarily need to be in a runnable state, at the beginning we can start the code review without running the code.</li>
  <li>Create a new branch locally and copy, add, commit this file or this set of files to the repository and push to Github</li>
  <li>Access the web interface of Github, it should have detected that you just pushed a new branch and asked if you want to create a pull request. Create a pull request with a few details on the code under review.</li>
  <li>Point the reviewer to the pull request</li>
</ul>

<h2 id="how-to-review-an-improvement-to-the-software">How to review an improvement to the software</h2>

<p>The implementation of a feature should be performed on a separate branch, then it is straightforward to push it to Github, create a pull request and ask reviewers to look at the set of changes.</p>

<h2 id="how-to-perform-the-actual-code-review">How to perform the actual code review</h2>

<p>Coding style should not be the main focus of the review, the most important feedback for the author are high-level comments on software organization. The reviewer should focus on what makes the software more usable and more maintenable.</p>

<p>A few examples:</p>

<ul>
  <li>can some parts of the code be simplified?</li>
  <li>is there any functionality that could be replaced by an existing library?</li>
  <li>is it clear what each part of the software is doing?</li>
  <li>is there a more straightforward way of splitting the code into files?</li>
  <li>is documentation enough?</li>
  <li>are there some function arguments or function names that could be easily misinterpreted by a user?</li>
</ul>

<p>The purpose is to improve the code, but also to help the code author to improve her coding skills.</p>

<p>On the Github pull requests interface, it is possible both to write general comments, and to click on a single line of code and write an inline comment.</p>

<h2 id="how-to-implement-reviewers-recommendations">How to implement reviewerâ€™s recommendations</h2>

<p>The author can improve the code locally on the same branch used in the pull request, then commit and push the changes to Github, the changes will be automatically added to the existing pull request, so the reviewer can start another iteration of the review process.</p>

<p>Comments and suggestions are welcome.</p>

  </div><a class="u-url" href="/2014/08/code-review-for-scientific-computing.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
      </div>
      <div class="footer-col">
        <p>Tutorials and blog posts by Andrea Zonca: Python, Jupyter, Kubernetes</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"><li><a rel="me" href="https://github.com/zonca" target="_blank" title="zonca"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg></a></li><li><a rel="me" href="https://twitter.com/andreazonca" target="_blank" title="andreazonca"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg></a></li></ul>
</div>

  </div>

</footer>
</body>

</html>
