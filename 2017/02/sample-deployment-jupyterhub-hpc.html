<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Sample deployment of Jupyterhub in HPC on SDSC Comet | Andrea Zonca</title>
<meta name="generator" content="Jekyll v4.0.0" />
<meta property="og:title" content="Sample deployment of Jupyterhub in HPC on SDSC Comet" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="I have deployed an experimental Jupyterhub service (ask me privately if you would like access) installed on a SDSC Cloud virtual machine that spawns single user Jupyter notebooks on Comet computing nodes using batchspawner and then proxies the Notebook back to the user using SSH-tunneling." />
<meta property="og:description" content="I have deployed an experimental Jupyterhub service (ask me privately if you would like access) installed on a SDSC Cloud virtual machine that spawns single user Jupyter notebooks on Comet computing nodes using batchspawner and then proxies the Notebook back to the user using SSH-tunneling." />
<link rel="canonical" href="https://zonca.dev/2017/02/sample-deployment-jupyterhub-hpc.html" />
<meta property="og:url" content="https://zonca.dev/2017/02/sample-deployment-jupyterhub-hpc.html" />
<meta property="og:site_name" content="Andrea Zonca" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2017-02-26T12:00:00-06:00" />
<script type="application/ld+json">
{"headline":"Sample deployment of Jupyterhub in HPC on SDSC Comet","dateModified":"2017-02-26T12:00:00-06:00","datePublished":"2017-02-26T12:00:00-06:00","description":"I have deployed an experimental Jupyterhub service (ask me privately if you would like access) installed on a SDSC Cloud virtual machine that spawns single user Jupyter notebooks on Comet computing nodes using batchspawner and then proxies the Notebook back to the user using SSH-tunneling.","mainEntityOfPage":{"@type":"WebPage","@id":"https://zonca.dev/2017/02/sample-deployment-jupyterhub-hpc.html"},"@type":"BlogPosting","url":"https://zonca.dev/2017/02/sample-deployment-jupyterhub-hpc.html","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="https://zonca.dev/feed.xml" title="Andrea Zonca" /><link rel="shortcut icon" type="image/x-icon" href="/images/favicon.ico"><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Sample deployment of Jupyterhub in HPC on SDSC Comet | Andrea Zonca</title>
<meta name="generator" content="Jekyll v4.0.0" />
<meta property="og:title" content="Sample deployment of Jupyterhub in HPC on SDSC Comet" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="I have deployed an experimental Jupyterhub service (ask me privately if you would like access) installed on a SDSC Cloud virtual machine that spawns single user Jupyter notebooks on Comet computing nodes using batchspawner and then proxies the Notebook back to the user using SSH-tunneling." />
<meta property="og:description" content="I have deployed an experimental Jupyterhub service (ask me privately if you would like access) installed on a SDSC Cloud virtual machine that spawns single user Jupyter notebooks on Comet computing nodes using batchspawner and then proxies the Notebook back to the user using SSH-tunneling." />
<link rel="canonical" href="https://zonca.dev/2017/02/sample-deployment-jupyterhub-hpc.html" />
<meta property="og:url" content="https://zonca.dev/2017/02/sample-deployment-jupyterhub-hpc.html" />
<meta property="og:site_name" content="Andrea Zonca" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2017-02-26T12:00:00-06:00" />
<script type="application/ld+json">
{"headline":"Sample deployment of Jupyterhub in HPC on SDSC Comet","dateModified":"2017-02-26T12:00:00-06:00","datePublished":"2017-02-26T12:00:00-06:00","description":"I have deployed an experimental Jupyterhub service (ask me privately if you would like access) installed on a SDSC Cloud virtual machine that spawns single user Jupyter notebooks on Comet computing nodes using batchspawner and then proxies the Notebook back to the user using SSH-tunneling.","mainEntityOfPage":{"@type":"WebPage","@id":"https://zonca.dev/2017/02/sample-deployment-jupyterhub-hpc.html"},"@type":"BlogPosting","url":"https://zonca.dev/2017/02/sample-deployment-jupyterhub-hpc.html","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

<link href="https://unpkg.com/@primer/css/dist/primer.css" rel="stylesheet" />
<link rel="stylesheet" href="//use.fontawesome.com/releases/v5.0.7/css/all.css"><link type="application/atom+xml" rel="alternate" href="https://zonca.dev/feed.xml" title="Andrea Zonca" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css" integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq" crossorigin="anonymous">
    <script type="text/javascript" async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML"> </script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js" integrity="sha384-y23I5Q6l+B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd+qj+o24G5ZU2zJz" crossorigin="anonymous"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js" integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI" crossorigin="anonymous"></script>
    <script>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement( document.body, {
        delimiters: [
            {left: "$$", right: "$$", display: true},
            {left: "[%", right: "%]", display: true},
            {left: "$", right: "$", display: false}
        ]}
        );
    });
    </script>


<script>
function wrap_img(fn) {
    if (document.attachEvent ? document.readyState === "complete" : document.readyState !== "loading") {
        var elements = document.querySelectorAll(".post img");
        Array.prototype.forEach.call(elements, function(el, i) {
            if (el.getAttribute("title")) {
                const caption = document.createElement('figcaption');
                var node = document.createTextNode(el.getAttribute("title"));
                caption.appendChild(node);
                const wrapper = document.createElement('figure');
                wrapper.className = 'image';
                el.parentNode.insertBefore(wrapper, el);
                el.parentNode.removeChild(el);
                wrapper.appendChild(el);
                wrapper.appendChild(caption);
            }
        });
    } else { document.addEventListener('DOMContentLoaded', fn); }
}
window.onload = wrap_img;
</script>

<script>
    document.addEventListener("DOMContentLoaded", function(){
    // add link icon to anchor tags
    var elem = document.querySelectorAll(".anchor-link")
    elem.forEach(e => (e.innerHTML = '<i class="fas fa-link fa-xs"></i>'));
    });
</script>
</head><body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Andrea Zonca</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About Me</a><a class="page-link" href="/search/">Search</a><a class="page-link" href="/categories/">Tags</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Sample deployment of Jupyterhub in HPC on SDSC Comet</h1><p class="post-meta post-meta-title"><time class="dt-published" datetime="2017-02-26T12:00:00-06:00" itemprop="datePublished">
        Feb 26, 2017
      </time>
       â€¢ <span class="read-time" title="Estimated read time">
    
    
      1 min read
    
</span></p>

    
      <p class="category-tags"><i class="fas fa-tags category-tags-icon"></i></i> 
      
        <a class="category-tags-link" href="/categories/#ipython">ipython</a>
        &nbsp;
      
        <a class="category-tags-link" href="/categories/#jupyterhub">jupyterhub</a>
        &nbsp;
      
        <a class="category-tags-link" href="/categories/#hpc">hpc</a>
        &nbsp;
      
        <a class="category-tags-link" href="/categories/#comet">comet</a>
        
      
      </p>
    

    </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>I have deployed an experimental Jupyterhub service (ask me privately if you would like access) installed on a <a href="http://www.sdsc.edu/services/it/cloud.html">SDSC Cloud</a> virtual machine that spawns single user Jupyter notebooks on Comet computing nodes using <a href="https://github.com/jupyterhub/batchspawner"><code class="highlighter-rouge">batchspawner</code></a> and then proxies the Notebook back to the user using SSH-tunneling.</p>

<h2 id="functionality">Functionality</h2>

<p>This kind of setup is functionally equivalent to launching a job yourself on Comet, launch <code class="highlighter-rouge">jupyter notebook</code> and then SSH-Tunneling the port to your local machine, but way more convenient. You jus open your browser to  the Jupyterhub instance, authenticate with your XSEDE credentials, choose queue and job length and wait for the Notebook job to be ready (generally it is a matter of minutes).</p>

<h2 id="rationale">Rationale</h2>

<p>Jupyter Notebooks have a lot of use-cases on HPC, it can be used for:</p>

<ul>
  <li>In-situ visualization</li>
  <li>Interactive data analysis when local resources are not enough, either in terms of RAM or disk space</li>
  <li>Monitoring other running jobs</li>
  <li>Launch <a href="https://github.com/ipython/ipyparallel">IPython Parallel</a> jobs and distribute computation to them in parallel</li>
  <li>Interact with a running Spark cluster (we support Spark on Comet)</li>
</ul>

<p>More on this on my <a href="https://zonca.github.io/2015/04/jupyterhub-hpc.html">Run Jupyterhub on a Supercomputer</a> old blog post.</p>

<h2 id="setup-details">Setup details</h2>

<p>The Jupyter team created a repository for sample HPC deployments, I added all configuration files of my deployment there, with all details about the setup:</p>

<ul>
  <li><a href="https://github.com/jupyterhub/jupyterhub-deploy-hpc/tree/master/batchspawner-xsedeoauth-sshtunnel-sdsccomet">Sample deployment in the <code class="highlighter-rouge">jupyterhub-deploy-hpc</code> repository</a></li>
</ul>

<p>Please send feedback opening an issue in that repository and tagging <code class="highlighter-rouge">@zonca</code>.</p>

  </div><a class="u-url" href="/2017/02/sample-deployment-jupyterhub-hpc.html" hidden></a>
</article>
      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
      </div>
      <div class="footer-col">
        <p>Tutorials and blog posts by Andrea Zonca: Python, Jupyter, Kubernetes</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"><li><a rel="me" href="https://github.com/zonca" title="zonca"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg></a></li><li><a rel="me" href="https://twitter.com/andreazonca" title="andreazonca"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg></a></li></ul>
</div>

  </div>

</footer>
</body>

</html>
