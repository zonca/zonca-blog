<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="twitter:card" content="summary_large_image" /><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Coordinate a large Latex document with multiple Overleaf projects and Github | Andrea Zonca</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="Coordinate a large Latex document with multiple Overleaf projects and Github" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="In case we need to build a large document (~hundreds of pages) and we have a large number of collaborators (more than 50), it is convenient to have each section of the document be a different Overleaf project. Also, we don’t want to rely on Overleaf only, we prefer backup of everything to Github." />
<meta property="og:description" content="In case we need to build a large document (~hundreds of pages) and we have a large number of collaborators (more than 50), it is convenient to have each section of the document be a different Overleaf project. Also, we don’t want to rely on Overleaf only, we prefer backup of everything to Github." />
<link rel="canonical" href="https://zonca.dev/2021/01/github-overleaf-large-document.html" />
<meta property="og:url" content="https://zonca.dev/2021/01/github-overleaf-large-document.html" />
<meta property="og:site_name" content="Andrea Zonca" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-01-28T00:00:00-06:00" />
<script type="application/ld+json">
{"headline":"Coordinate a large Latex document with multiple Overleaf projects and Github","url":"https://zonca.dev/2021/01/github-overleaf-large-document.html","dateModified":"2021-01-28T00:00:00-06:00","datePublished":"2021-01-28T00:00:00-06:00","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://zonca.dev/2021/01/github-overleaf-large-document.html"},"description":"In case we need to build a large document (~hundreds of pages) and we have a large number of collaborators (more than 50), it is convenient to have each section of the document be a different Overleaf project. Also, we don’t want to rely on Overleaf only, we prefer backup of everything to Github.","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="https://zonca.dev/feed.xml" title="Andrea Zonca" /><link rel="shortcut icon" type="image/x-icon" href="/images/favicon.ico"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Primer/15.2.0/primer.css" integrity="sha512-xTz2ys4coGAOz8vuV1NcQBkgVmKhsSEtjbqyMJbBHRplFuvKIUo6xhLHpAyPt9mfR6twHJgn9OgVLuqOvjeBhg==" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog==" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/katex.min.css" integrity="sha512-h7nl+xz8wgDlNM4NqKEM4F1NkIRS17M9+uJwIGwuo8vGqIl4BhuCKdxjWEINm+xyrUjNCnK5dCrhM0sj+wTIXw==" crossorigin="anonymous" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/katex.min.js" integrity="sha512-/CMIhXiDA3m2c9kzRyd97MTb3MC6OVnx4TElQ7fkkoRghwDf6gi41gaT1PwF270W6+J60uTmwgeRpNpJdRV6sg==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/contrib/auto-render.min.js" integrity="sha512-Do7uJAaHZm5OLrIv/yN4w0iG1dbu01kzdMNnFfu/mAqgUk6Nniv2JYHcwH+cNwjqgLcqcuBBk+JRvprLVI8azg==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha512-0doc9hKxR3PYwso42RD1p5ySZpzzuDiOwMrdCEh2WdJZCjcmFKc/wEnL+z8fBQrnHoiNWbo+3fiGkOYXBdQp4A==" crossorigin="anonymous"></script>
    <script>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement( document.body, {
        delimiters: [
            {left: "$$", right: "$$", display: true},
            {left: "[%", right: "%]", display: true},
            {left: "$", right: "$", display: false}
        ]}
        );
    });
    </script>


<script>
function wrap_img(fn) {
    if (document.attachEvent ? document.readyState === "complete" : document.readyState !== "loading") {
        var elements = document.querySelectorAll(".post img");
        Array.prototype.forEach.call(elements, function(el, i) {
            if (el.getAttribute("title") && (el.className != "emoji")) {
                const caption = document.createElement('figcaption');
                var node = document.createTextNode(el.getAttribute("title"));
                caption.appendChild(node);
                const wrapper = document.createElement('figure');
                wrapper.className = 'image';
                el.parentNode.insertBefore(wrapper, el);
                el.parentNode.removeChild(el);
                wrapper.appendChild(el);
                wrapper.appendChild(caption);
            }
        });
    } else { document.addEventListener('DOMContentLoaded', fn); }
}
window.onload = wrap_img;
</script>

<script>
    document.addEventListener("DOMContentLoaded", function(){
    // add link icon to anchor tags
    var elem = document.querySelectorAll(".anchor-link")
    elem.forEach(e => (e.innerHTML = '<i class="fas fa-link fa-xs"></i>'));
    });
</script>
</head>
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Andrea Zonca</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About Me</a><a class="page-link" href="/consult/">Consulting</a><a class="page-link" href="/search/">Search</a><a class="page-link" href="/categories/">Tags</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Coordinate a large Latex document with multiple Overleaf projects and Github</h1><p class="post-meta post-meta-title"><time class="dt-published" datetime="2021-01-28T00:00:00-06:00" itemprop="datePublished">
        Jan 28, 2021
      </time>
    </p>

    
      <p class="category-tags"><i class="fas fa-tags category-tags-icon"></i></i> 
      
        <a class="category-tags-link" href="/categories/#latex">latex</a>
        &nbsp;
      
        <a class="category-tags-link" href="/categories/#git">git</a>
        
      
      </p>
    

      
        <div class="pb-5 d-flex flex-wrap flex-justify-end">
          <div class="px-2">

    <a href="https://github.com/zonca/zonca-blog/tree/master/_posts/2021-01-28-github-overleaf-large-document.md" role="button" target="_blank">
<img class="notebook-badge-image" src="/assets/badges/github.svg" alt="View On GitHub">
    </a>
</div>

    </div>
      </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>In case we need to build a large document (~hundreds of pages) and we have a large number of collaborators (more than 50), it is convenient to have each section of the document be a
different Overleaf project. Also, we don’t want to rely on Overleaf only, we prefer backup of everything to Github.</p>

<p>Then have a Github repository that includes all of those as <code class="language-plaintext highlighter-rouge">git submodules</code> and can build the whole document together automatically using Github Actions and provides the PDF. We cannot use Overleaf here because it doesn’t support <code class="language-plaintext highlighter-rouge">submodules</code>.</p>

<p>The setup is based on the <a href="https://www.overleaf.com/learn/latex/Multi-file_LaTeX_projects#The_standalone_package">Overleaf tutorial on multi-page Latex</a> using the “Standalone package” setup, and then splitting it into separate repositories.</p>

<p>See <a href="https://www.overleaf.com/read/xfcwyzncxhjh">this Overleaf project</a> for the project configuration before being split into separate projects.</p>

<h2 id="configuration-of-the-github-repository">Configuration of the Github repository</h2>

<p>Here you can use your official Github account.</p>

<p>Create a repository on Github for the main document and for each of the subsections</p>

<p>See for example:</p>

<ul>
  <li><a href="https://github.com/zonca/overleaf_largedoc_main">https://github.com/zonca/overleaf_largedoc_main</a></li>
  <li><a href="https://github.com/zonca/overleaf_largedoc_intro">https://github.com/zonca/overleaf_largedoc_intro</a></li>
  <li><a href="https://github.com/zonca/overleaf_largedoc_section_1">https://github.com/zonca/overleaf_largedoc_section_1</a></li>
</ul>

<p>Each repository has a <code class="language-plaintext highlighter-rouge">main.tex</code> file in the root folder which contains the
content of that section.</p>

<p>In the main repository, we configure <code class="language-plaintext highlighter-rouge">git submodules</code> for each section, e.g.:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git submodule add git@github.com:zonca/overleaf_largedoc_intro.git 0_introduction
</code></pre></div></div>

<p>Now you should double-check you can compile locally the document with <code class="language-plaintext highlighter-rouge">pdflatex</code>.</p>

<h2 id="automation-with-github-actions">Automation with Github Actions</h2>

<p>I have configured Github Actions to run at every commit just in the main repository, see <a href="https://github.com/zonca/overleaf_largedoc_main/blob/master/.github/workflows/build_latex.yml">the details</a>:</p>

<ul>
  <li>At each commit, Github runs <code class="language-plaintext highlighter-rouge">latexmk</code> to build the full PDF, then attaches it to that run, they can be downloaded from the Github Actions tab, see <a href="https://github.com/zonca/overleaf_largedoc_main/actions/runs/519568514">the artifacts tab at the end of this run</a>.</li>
  <li>Whenever you create a <code class="language-plaintext highlighter-rouge">tag</code> in the repository, for example <code class="language-plaintext highlighter-rouge">1.0</code> or <code class="language-plaintext highlighter-rouge">2021.01.28</code>, Github creates a release with the PDF attached (named after the release), see <a href="https://github.com/zonca/overleaf_largedoc_main/releases/tag/2021.01.28">an example</a></li>
  <li>In the main repository, I prepared a script to update all the sections to their latest commit, see <a href="https://github.com/zonca/overleaf_largedoc_main/blob/master/update_sections.sh"><code class="language-plaintext highlighter-rouge">update_sections.sh</code></a>. This can be also triggered via web by manually running the <a href="https://github.com/zonca/overleaf_largedoc_main/actions?query=workflow%3A%22Update+all+sections%22">“Update all sections” workflow</a> (click on the “Run workflow” button and choose the <code class="language-plaintext highlighter-rouge">master</code> branch). This creates a new commit therefore triggers creation of the PDF. It is also configured to run every morning at 7am PT.</li>
</ul>

<p>This should work also for private repositories, both Free and Team (academic) organization on Github have 2000+ Github action minutes a month. You will need to switch plan if you have a Legacy account which doesn’t offer Github Actions on private repositories.</p>

<h2 id="integration-with-overleaf">Integration with Overleaf</h2>

<p>Main issue the Github integration with Overleaf is they require write access to all your repositories (!! crazy, I know).</p>

<p>So let’s create a new Github account, I called mine <code class="language-plaintext highlighter-rouge">zoncaoverleafbot</code> and invite the new user to be a Collaborator to each of the sections repositories.</p>

<p>Then login to Overleaf with your real account, click on “Import from Github”, and when you are redirected to Github to link your account, link <strong>the overleafbot</strong> account instead, which only has access to the sections repositories.</p>

<p>Now create a Overleaf project for each document section, Overleaf can build independent PDF for each of the subsection.</p>

<p>Once in a while, you can manually synchronize from/to Github using the Github button.
If you share the project by sending someone the “Edit” link, they can also use the Github integration that the project owner has configured, so no need for them to link their Github account.
Best would be for each Overleaf user, each time they login, to pull changes from Github before starting to work and push their changes with a commit message when they are done.</p>

<p>Moreover, Overleaf also has the standard Git interface, so if there is any complex merging issue, an expert user can rely on that to resolve and then switch back to the automatic interface.</p>

<h2 id="conclusion">Conclusion</h2>

<p>This is just a prototype implementation, I’d be interested in ideas for improvements, please <a href="https://github.com/zonca/overleaf_largedoc_main/issues">open an issue on Github</a></p>

  </div><a class="u-url" href="/2021/01/github-overleaf-large-document.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
      </div>
      <div class="footer-col">
        <p>Tutorials and blog posts by Andrea Zonca: Python, Jupyter, Kubernetes</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"><li><a rel="me" href="https://github.com/zonca" target="_blank" title="zonca"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg></a></li><li><a rel="me" href="https://twitter.com/andreazonca" target="_blank" title="andreazonca"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg></a></li></ul>
</div>

  </div>

</footer>
</body>

</html>
